{
  "AsrMvp": {
    "RuntimeProfile": "dev",
    "AsrProvider": "mock",
    "SampleRate": 16000,
    "ChunkMs": 320,
    "TailRollbackSeconds": 2,
    "TranscriptStability": {
      "Enabled": true,
      "MinFrozenPrefixChars": 1,
      "MaxTailRewriteChars": 10
    },
    "Resilience": {
      "Asr": {
        "TimeoutMs": 3000,
        "RetryCount": 1,
        "CircuitBreakFailures": 3,
        "CircuitBreakWindowSeconds": 30
      },
      "Agent": {
        "TimeoutMs": 3000,
        "RetryCount": 1,
        "CircuitBreakFailures": 3,
        "CircuitBreakWindowSeconds": 30
      },
      "Tts": {
        "TimeoutMs": 3000,
        "RetryCount": 1,
        "CircuitBreakFailures": 3,
        "CircuitBreakWindowSeconds": 30
      }
    },
    "Sla": {
      "FirstTokenP95Ms": 1500,
      "FinalP95Ms": 5000,
      "ErrorRatePercent": 5.0
    },
    "Fallback": {
      "EnableOnAsrFailure": true,
      "EnableOnAgentFailure": true,
      "EnableOnTtsFailure": true,
      "AgentFallbackText": "抱歉，我暂时无法回答这个问题。"
    },
    "AudioProcessing": {
      "EnableDenoise": true,
      "EnableAgc": true,
      "EnableDcRemoval": true,
      "EnablePreEmphasis": true,
      "AgcTargetRms": 0.12,
      "AgcMaxGain": 6.0,
      "NoiseFloorAlpha": 0.98,
      "NoiseSuppressStrength": 0.65,
      "PreEmphasis": 0.97
    },
    "FunAsrWebSocket": {
      "Url": "ws://127.0.0.1:10095",
      "Mode": "online",
      "ChunkSize": [5, 10, 5],
      "ChunkInterval": 10,
      "EncoderChunkLookBack": 4,
      "DecoderChunkLookBack": 0,
      "Itn": true,
      "ReceiveTimeoutMs": 300,
      "FinalTimeoutMs": 3000
    },
    "ManySpeechParaformer": {
      "ModelDir": "models/paraformer-online-onnx",
      "Threads": 2,
      "AutoGenerateTokensTxt": true
    },
    "Agent": {
      "Provider": "mock",
      "MaxHistoryTurns": 8,
      "TimeoutMs": 3000,
      "SystemPrompt": "You are a concise helpful assistant for voice conversation.",
      "OpenAiCompatible": {
        "BaseUrl": "https://open.bigmodel.cn/api/paas/v4/",
        "ApiKey": "",
        "Model": "glm-4.7",
        "Temperature": 0.7
      }
    },
    "Tts": {
      "Provider": "mock",
      "SampleRate": 16000,
      "TimeoutMs": 3000,
      "ChunkDurationMs": 200,
      "Kokoro": {
        "ModelDir": "models/kokoro-v1.0",
        "Lexicon": "./lexicon/lexicon-zh.txt",
        "Lang": "zh",
        "Provider": "cpu",
        "NumThreads": 2,
        "Speed": 1.0,
        "SpeakerId": 50
      }
    },
    "Endpointing": {
      "EndSilenceMs": 800,
      "MinSegmentMs": 1200,
      "MinSilenceMs": 300,
      "MergeBackMs": 300,
      "MaxSegmentMs": 15000,
      "EnergyThreshold": 0.012,
      "AdaptiveVadEnabled": true,
      "AdaptiveVadFloor": 0.004,
      "AdaptiveVadMultiplier": 2.2,
      "AdaptiveVadWindowFrames": 40,
      "DynamicProfileEnabled": true,
      "NoisyFrameRmsThreshold": 0.018,
      "NoisyScoreAlpha": 0.9,
      "NoisyScoreThreshold": 0.55,
      "QuietProfile": {
        "EndSilenceMs": 800,
        "MinSilenceMs": 300,
        "MergeBackMs": 300
      },
      "NoisyProfile": {
        "EndSilenceMs": 1100,
        "MinSilenceMs": 400,
        "MergeBackMs": 450
      }
    },
    "TwoPass": {
      "Enabled": false,
      "Provider": "sensevoice",
      "WindowSeconds": 12,
      "WindowSegments": 3,
      "PrefixLockEnabled": true,
      "Trigger": {
        "OnEndpointing": true,
        "OnMaxSegment": true,
        "OnListenStop": true,
        "MinSegmentMsForEndpointing": 1800
      },
      "SenseVoice": {
        "ModelDir": "models/sherpa-onnx-sense-voice-zh-en-ja-ko-yue-2024-07-17",
        "ModelFile": "model.int8.onnx",
        "Language": "zh",
        "UseInverseTextNormalization": true,
        "NumThreads": 2,
        "Provider": "cpu"
      }
    },
    "PostProcess": {
      "EnablePunctuation": true,
      "EnableNormalization": true
    },
    "Metrics": {
      "Enabled": true
    },
    "Alerts": {
      "Enabled": true,
      "StageErrorRateWarnPercent": 5.0,
      "AsrP95WarnMs": 1200,
      "AgentP95WarnMs": 2500,
      "TtsP95WarnMs": 2500
    },
    "Release": {
      "Version": "dev-local",
      "ForceMockAsr": false,
      "ForceMockAgent": false,
      "ForceMockTts": false
    }
  },
  "Logging": {
    "LogLevel": {
      "Default": "Information",
      "Microsoft.AspNetCore": "Warning"
    }
  }
}
